alpaka.cuprit.net {
	# Add logging for debugging
	log {
		output file /data/access.log
		format console
	}

	# Test endpoint
	handle /test {
		respond "Caddy is working!"
	}

	# Add route for ProjectInfo API - must be BEFORE the catch-all handler
	handle /projects/* {
		uri strip_prefix /projects
		reverse_proxy qgis-server:80 {
			header_up SERVICE "PROJECTINFO"
		}
	}

	# OGC services route
	handle /ogc/* {
		reverse_proxy qgis-server:80
	}

	# Catch-all handler - must be LAST
	handle {
		reverse_proxy qgis-server:80
	}
}